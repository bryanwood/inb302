@model UFiles.Web.Models.BaseAuthenticatedModel
@{
    ViewBag.Title = "Send a File";
    Layout = "~/Views/Shared/Full/_Site.Sectioned.Master.Layout.cshtml";
}
@section PageHeader {
    <div class="coreHeaderUserContainer floatRight">
        logged in as <span class="coreExternalHighlight">@Model.getUser().Email</span> |
        <a href="#">logout</a></div>
}
@section PageSidebar{
    <div class="sideBarHeading">
        @Model.getUser().FName @Model.getUser().LName</div>
    <div class="sidebarTabGroup">
        <div class="sidebarTab">
            <a href="@Url.Action("Overview", "Home")">home</a></div>
        <div class="sidebarTab coreExternalHighlight">
            <a href="@Url.Action("SendFile", "Transmittal")">send a file</a></div>
    </div>
    <div class="sidebarTabGroup">
        <div class="sidebarTab" id="tabMyGroup">
            <a href="@Url.Action("MyGroups", "Group")">my groups</a></div>
    </div>
    <div class="sidebarTabGroup">
        <div class="sidebarTab" id="tabMyFiles">
            <a href="@Url.Action("FilesByMe", "Transmittal")">my files</a></div>
        <div class="sidebarTab" id="tabOtherFiles">
            <a href="@Url.Action("FilesToMe", "Transmittal")">files sent to me</a></div>
    </div>
    <div class="sidebarTabGroup">
        <div class="sidebarTab" id="tabSettings">
            <a href="@Url.Action("Settings", "Account")">settings</a></div>
    </div>
}
<form id="transmittalDetails" action="#" method="post" enctype="multipart/form-data">
<div class="coreSectionHeader floatRight">
    attach file
</div>
<div class="coreSectionContainer floatRight" id="fileUpload">
    <div class="coreContent floatFix">
        <div class="uploadSectionMajor floatFix">
            <input type="submit" class="uploadSendButton coreButtonAccept floatRight" value="send file" />
            <input type="file" name="uploadedFile" class="uploadUploadButton floatRight" />
        </div>
        <div class="boxInformationHighlight informationHighlightError" style="display: none;
            opacity: 0.0;" id="validateFail">
        </div>
    </div>
</div>
<input type="hidden" id="sendTo" name="sendTo" value="email" />
<div class="coreSectionHeader floatRight">
    send to
</div>
<div class="coreSectionContainer floatRight" id="recipientOptions">
    <div class="coreSectionTabGroup floatFix" id="senderTabGroup">
        <a href="#">
            <div class="coreTabSelected coreSectionTab floatLeft" onclick="swapTab('email', true);"
                id="emailTab" style="width: 50%">
                Email Address</div>
        </a><a href="#">
            <div class="coreSectionTab floatLeft" id="groupTab" onclick="swapTab('group', true);"
                style="width: 50%">
                Group</div>
        </a>
    </div>
    <div class="coreContent">
        <div class="boxSection floatFix" id="emailSection">
            <div class="boxMinorSection floatFix">
                <div class="boxLabel loginAuthBoxLabelOverride floatLeft" id="emailLabel">
                    Email Address</div>
                <input type="text" class="boxInput floatRight" onblur="hasInput(this, 'email');"
                    name="recipientEmail" />
            </div>
        </div>
        <div class="boxSection floatFix" style="display: none;" id="groupSection">
            <div class="boxMinorSection floatFix">
                <div class="boxLabel loginAuthBoxLabelOverride floatLeft" id="emailLabel">
                    Group</div>
                <input type="text" class="boxInput floatRight" onblur="hasInput(this, 'group');"
                    name="recipientGroups" />
            </div>
        </div>
        <div class="boxInformationHighlight informationHighlightError" style="display: none;
            opacity: 0.0;" id="recipientValidateFail">
        </div>
    </div>
</div>
<div class="coreSectionHeader floatRight">
    restrictions
</div>
<div class="coreSectionContainer floatRight" id="restrictionOptions">
    <div class="coreSectionTabGroup floatFix" id="restrictionTabGroup">
        <a href="#">
            <div class="coreTabSelected coreSectionTab floatLeft" onclick="swapTab('userRestriction', false);"
                id="userRestrictionTab" style="width: 20%">
                User</div>
        </a><a href="#">
            <div class="coreSectionTab floatLeft" onclick="swapTab('groupRestriction', false);"
                id="groupRestrictionTab" style="width: 20%">
                Group</div>
        </a><a href="#">
            <div class="coreSectionTab floatLeft" onclick="swapTab('locationRestriction', false);"
                id="locationRestrictionTab" style="width: 20%">
                Location</div>
        </a><a href="#">
            <div class="coreSectionTab floatLeft" onclick="swapTab('ipRestriction', false);"
                id="ipRestrictionTab" style="width: 20%">
                IP</div>
            <a href="#">
                <div class="coreSectionTab floatLeft" onclick="swapTab('timeRestriction', false);"
                    id="timeRestrictionTab" style="width: 20%">
                    Time Range</div>
            </a>
    </div>
    <div class="coreContent">
        <div class="boxSection floatFix" id="userRestrictionSection">
            <div class="boxInformationHighlight informationHighlightAdditional">
                Restrict access to this file to specific users by their email address below.<p>
                    Seperate each email address with a <b>;</b>.</p>
            </div>
            <div class="boxMinorSection floatFix">
                <div class="boxLabel loginAuthBoxLabelOverride floatLeft" id="userRestrictionLabel">
                    Email Address</div>
                <input type="text" class="boxInput floatRight" name="emailRestriction" />
            </div>
        </div>
        <div class="boxSection floatFix" style="display: none;" id="groupRestrictionSection">
            <div class="boxInformationHighlight informationHighlightAdditional">
                Restrict access to this file to the group names listed below.<p>
                    Seperate each group name with a <b>;</b>.</p>
            </div>
            <div class="boxMinorSection floatFix">
                <div class="boxLabel loginAuthBoxLabelOverride floatLeft" id="GroupRestrictionLabel">
                    Group Name</div>
                <input type="text" class="boxInput floatRight" name="groupRestriction" />
            </div>
        </div>
        <div class="boxSection floatFix" style="display: none;" id="locationRestrictionSection">
            <div class="boxInformationHighlight informationHighlightAdditional">
                Restrict access to this file to the locations by their post code below.<p>
                    Seperate each post code with a <b>;</b>.</p>
            </div>
            <div class="boxMinorSection floatFix">
                <div class="boxLabel loginAuthBoxLabelOverride floatLeft" id="LocationRestrictionLabel">
                    Location</div>
                <input type="text" class="boxInput floatRight" name="locationString" />
            </div>
        </div>
        <div class="boxSection floatFix" style="display: none;" id="ipRestrictionSection">
            <div class="boxInformationHighlight informationHighlightAdditional">
                Restrict access to this file to the IP Addresses listed below.<p>
                    Seperate each group name with a <b>;</b>.</p>
            </div>
            <div class="boxMinorSection floatFix">
                <div class="boxLabel loginAuthBoxLabelOverride floatLeft" id="ipRestrictionLabel">
                    IP Address</div>
                <input type="text" class="boxInput floatRight" name="ipString" />
            </div>
        </div>
        <div class="boxSection floatFix" style="display: none;" id="timeRestrictionSection">
            <div class="boxInformationHighlight informationHighlightAdditional">
                Restrict access to this file to the time range displayed below.</div>
            <div class="boxMinorSection floatFix">
                <div class="boxLabel loginAuthBoxLabelOverride floatLeft" id="timeRestrictionEnabledLabel">
                    Enable</div>
                <input type="checkbox" class="floatLeft" name="timeIsEnabled" />
            </div>
            <div class="boxMinorSection floatFix">
                <div class="boxLabel loginAuthBoxLabelOverride floatLeft" id="timeStartRestrictionLabel">
                    Start Time</div>
                <select class="boxSelect floatLeft" name="startTimeHour">
                    @{
                        for (int i = 0; i < 24; i++)
                        {
                        <option value="@i">@i</option>
                        }
                    }
                </select>
                <span class="floatLeft boxSpanLabel">hour(s)</span>
                <select class="boxSelect floatLeft" name="startTimeMinute">
                    @{
                        for (int i = 0; i < 60; i++)
                        {
                        <option value="@i">@i</option>
                        }
                    }
                </select>
                <span class="floatLeft boxSpanLabel">minute(s)</span>
                <input class="boxSelect floatLeft" name="startTimeDate" />
                <span class="floatLeft boxSpanLabel">date</span>
            </div>
            <div class="boxMinorSection floatFix">
                <div class="boxLabel loginAuthBoxLabelOverride floatLeft" id="timeEndRestrictionLabel">
                    End Time</div>
                <select class="boxSelect floatLeft" name="endTimeHour">
                    @{
                        for (int i = 0; i < 24; i++)
                        {
                        <option value="@i">@i</option>
                        }
                    }
                </select>
                <span class="floatLeft boxSpanLabel">hour(s)</span>
                <select class="boxSelect floatLeft" name="endTimeMinute">
                    @{
                        for (int i = 0; i < 60; i++)
                        {
                        <option value="@i">@i</option>
                        }
                    }
                </select>
                <span class="floatLeft boxSpanLabel">minute(s)</span>
                <input class="boxSelect floatLeft" name="endTimeDate" />
                <span class="floatLeft boxSpanLabel">date</span>
            </div>
        </div>
        <div class="boxInformationHighlight informationHighlightError" style="display: none;
            opacity: 0.0;" id="restrictionValidateFail">
        </div>
    </div>
</div>
</form>
@section inPageJavascript {
    $("#transmittalDetails").submit(function() { AjaxValidateAndGo(this, "@Url.Action("Upload")",
"#validateFail"); return false; }); var currentRecipientTab = "email"; var currentRestrictionTab
= "userRestriction"; function hasInput(input, tab) { if($(input).val() != "") {
$('#' + tab + 'Tab').css("font-weight", "bold"); } else { $('#' + tab + 'Tab').css("font-weight",
"normal"); } } function swapTab(toTab, isRecipientTab) { if(isRecipientTab) { $('#sendTo').val(toTab);
$('#' + currentRecipientTab + 'Tab').removeClass("coreTabSelected"); $('#' + currentRecipientTab
+ 'Section').css("display", "none"); currentRecipientTab = toTab; } else { $('#'
+ currentRestrictionTab + 'Tab').removeClass("coreTabSelected"); $('#' + currentRestrictionTab
+ 'Section').css("display", "none"); currentRestrictionTab = toTab; } $('#' + toTab
+ 'Tab').addClass("coreTabSelected"); $('#' + toTab + 'Section').css("display",
"block"); };
}
